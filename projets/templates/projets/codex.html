{% extends "projets/codex_navigation.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/projet.css' %}" />
{% endblock %}

{% block title %}
    Journal - {{ projet.titre }}
{% endblock %}

{% block nav-afficher_projet %}current{% endblock %}

{% block header %}
<div class="project-info">
  <input type="hidden" id="slug" value={{ projet.slug }}/>
  {% csrf_token %}
</div>
{% endblock %}

{% block content %}
<section class="today-entry">
  <article>
    <div class="header">
      <h1 class="header__title">Journal - {{ projet.titre|title}}</h1>
      <div class="header__subtitle">{{ projet.description }}</div>
    </div>
    
    <div class="journal-entry">
      <div class="header">
        <h2 class="header__title">{{ today_entry.date }}</h2>
        <div class="save-info" id="sauvegarde" style="display:none">Sauvegardé</div>          
      </div>
      <div class="content">
        {{ today_entry.journal_entry.non_field_errors }}
        {{ today_entry.journal_entry.texte.errors }}
        {{ today_entry.journal_entry.journal_id.errors }}
        {{ today_entry.journal_entry.texte }}
        {{ today_entry.journal_entry.journal_id }}
      </div>
    </div>  
    
    <div class="task-list">
      <div class="header">
        <h2 class="header__title">Tâches</h2>
        <div class="save-info" style="display:none">Sauvegardé</div>
      </div>
      <div class="content">
        <div class="new-task">
          <img class="add-item-button" id="add_todo" type="image" src="{% static "img/add_button.png" %}" alt="Ajouter" />
          {{ today_entry.new_task.texte.errors }}
          {{ today_entry.new_task.texte }}
        </div>
        {% for task_entry in today_entry.task_list reversed%}
        <div class="entry">
          {{ task_entry.realisee }}
          {{ task_entry.non_field_errors }}
          {{ task_entry.texte.errors }}
          {{ task_entry.todo_id.errors }}
          {{ task_entry.realisee.errors }}
          {{ task_entry.texte }}
          {{ task_entry.todo_id }}
        </div>
      {% endfor %}
      </div>
    </div>
  </article>  
</section>

<section class="older-entry">
  {% for entry in older_entry  reversed %}
  <article>
    <div class="journal-entry">
      <div class="header">
        <h2 class="header__title">{{ entry.date }}</h2>
        <div class="save-info" id="sauvegarde" style="display:none">Sauvegardé</div>
        <div class="ligne"></div>        
      </div>
      {% if entry.journal_entry %}
      <div class="content">
        {{ entry.journal_entry.non_field_errors }}
        {{ entry.journal_entry.texte.errors }}
        {{ entry.journal_entry.journal_id.errors }}
        {{ entry.journal_entry.texte }}
        {{ entry.journal_entry.journal_id }}
      </div>
      {% endif %}
    </div>  
    
    {% if entry.task_list %}
    <div class="task-list">
      <div class="header">
        <h2 class="header__title">Tâches</h2>
        <div class="save-info" style="display:none">Sauvegardé</div>
        <div class="ligne"></div>
      </div>
      <div class="content">
        {% for task_entry in entry.task_list %}
        <div class="entry">
          {{ task_entry.realisee }}
          {{ task_entry.non_field_errors }}
          {{ task_entry.texte.errors }}
          {{ task_entry.todo_id.errors }}
          {{ task_entry.realisee.errors }}
          {{ task_entry.texte }}
          {{ task_entry.todo_id }}
        </div>
      {% endfor %}
      </div>
    </div>
    {% endif %}
  </article>
  {% endfor %}
</section>
{% endblock %}

{% block script %}
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/autosize.min.js' %}"></script>
    <script src="{% static 'js/jquery.typewatch.min.js' %}"></script>
    <script src="{% static 'js/basic.js' %}"></script>
    <script src="{% static 'js/afficher_journal.js' %}"></script>
{% endblock %}

   


